"use strict";function interactiveHouse(){this.file=MyProject.ihFile,this.defaultViewBox="0 0 1140 1000",this.classes={controlsDisabled:"disabled"},this.rooms={"living-room":{id:"living_room",up:"bedroom",down:"basement",left:null,right:"kitchen"},office:{id:"office",up:null,down:"bedroom",left:null,right:"master-bedroom"},"master-bedroom":{id:"master_bedroom",up:null,down:"bathroom",left:"office",right:null},bedroom:{id:"bedroom",up:"office",down:"living-room",left:null,right:"bathroom"},bathroom:{id:"bathroom",up:"master-bedroom",down:"kitchen",left:"bedroom",right:"laundry"},laundry:{id:"laundry",up:"master-bedroom",down:"garage",left:"bathroom",right:null},kitchen:{id:"kitchen",up:"bathroom",down:"storage",left:"living-room",right:"garage"},garage:{id:"garage",up:"laundry",down:"storage",left:"kitchen",right:null},basement:{id:"basement",up:"living-room",down:null,left:null,right:"storage"},storage:{id:"storage",up:"kitchen",down:null,left:"basement",right:"garage"}},this.showingRoom=null,this.loadFile(this.file)}var MyProject={locationsPage:"/Locations",iconsFile:"/Portals/_default/Skins/CRDN/images/svg-symbols.svg",ihFile:"/Portals/0/images/interactive-house.svg"};!function(e){e(document).ready(function(){function t(t){t.stopPropagation(),e(".site-nav").addClass("js-show"),e(".site-overlay").addClass("js-show"),e("body").addClass("no-scroll"),e(document.body).on("click",function(e){o(e)}),e(document).keyup(function(e){27==e.keyCode&&o(e)})}function o(t){e(".site-nav").removeClass("js-show"),e(".site-overlay").removeClass("js-show"),e("body").removeClass("no-scroll")}function i(e,t){var o={uk:{pat:new RegExp(/([Gg][Ii][Rr] 0[Aa]{2})|((([A-Za-z][0-9]{1,2})|(([A-Za-z][A-Ha-hJ-Yj-y][0-9]{1,2})|(([A-Za-z][0-9][A-Za-z])|([A-Za-z][A-Ha-hJ-Yj-y][0-9]?[A-Za-z]))))\s?[0-9][A-Za-z]{2})/),msg:"Please enter a valid UK postal code."},us:{pat:new RegExp(/[0-9]{5}(?:-[0-9]{4})?/),msg:"Please enter a valid US postal code."},ca:{pat:new RegExp(/^(?!.*[DFIOQU])[A-VXY][0-9][A-Z] ?[0-9][A-Z][0-9]$/),msg:"Sorry, please enter a valid Canada postal code."}};return!!o[t].pat.test(e)||o[t].msg}function s(){var e=document.getElementById("searchLocationZip").value,t="us",o=location.host.split(".")[2];"com"==o&&(t="us"),"ca"==o&&(t="ca"),"co"==o&&(t="uk"),console.log(t);var s=i(e,t),a=document.getElementById("searchLocationError");if(!0===s)return a.textContent="",a.classList.remove("show"),!0;a.textContent=s,a.classList.add("show")}if(MyProject.header=e(".site-header"),MyProject.headerOriginalHeight=e(".site-header").outerHeight(),"true"!=Cookies.get("alert")&&(e(".alert--top").addClass("active"),e(".alert--top .close-btn").click(function(){e(".alert--top").removeClass("active"),Cookies.set("alert","true",{expires:1})})),e(".crdn-skin").css("paddingTop",MyProject.headerOriginalHeight),e(".site-header__menu-button").on("click",function(e){t(e)}),e(".site-nav__close").on("click",function(e){o()}),-1!=window.location.href.indexOf("Submit-a-Claim")&&jQuery("#main-content .pane.group").find(".alert.alert--success").length&&ga("send","event","Form","Submit a Claim Submission"),e(document).ajaxComplete(function(e,t,o){-1!=o.url.indexOf("Contact-us")&&ga("send","event","Form","Contact Form Submission")}),e("#searchLocationSubmit").click(function(e){if(e.preventDefault(),!0===s()){var t=document.getElementById("searchLocationZip").value;window.location.href=MyProject.locationsPage+"?location="+t}}),e("#searchLocationZip").blur(function(e){s()}),e(".skip-link").click(function(t){var o="#"+this.href.split("#")[1];e(o).attr("tabindex",-1).on("blur focusout",function(){e(this).removeAttr("tabindex")}).focus()}),e.ajax({url:MyProject.iconsFile,context:document.body}).done(function(t){e("svg",t).attr("class","visually-hidden").prependTo("body")}),e(".toggle-js").on("click",function(t){var o=void 0!=e(this).data("target")?e(this).data("target"):this,i=void 0!=e(this).data("toggle-class")?e(this).data("toggle-class"):"js-show";e(o).toggleClass(i)}),e(".media__body .read-more").on("click",function(t){t.preventDefault();var o=e(t.target);o.closest(".media__body").find(".content--toggle").toggleClass("show"),o.toggleClass("open")}),e(".DnnModule-416").length>0&&function(){var t=e(".DnnModule-416"),o=e(".region",t).first(),i=e(".card",o).first(),s=e(".hero-banner"),a=parseInt(o.css("paddingTop").replace("px","")),n=parseInt(s.css("paddingBottom").replace("px","")),r=i.outerHeight()/2,l=r+a+30;i.css({"margin-top":-2*l}),s.css({"border-bottom-width":l,"padding-bottom":n+r})}(),e("#places-map").length)new Waypoint({element:e("#places-map"),handler:function(){e(this.element).toggleClass("js-animate")},offset:e(window).height()-e(this.element).outerHeight()});e(".js-sticky").length&&e(".js-sticky").each(function(){var t=e(this),o=t.offset().top,i=t.outerHeight(),s=e('<div class="js-sticky-wrapper"></div>').height(i);t.wrap(s),e(window).scroll(function(){var i=t.data("sticky-offset")?e(t.data("sticky-offset")).outerHeight():0;e(document).scrollTop()+i>=o?t.addClass("is-sticky").css("top",i):t.removeClass("is-sticky").removeAttr("style")})}),e(".heading-side-lines").length&&e(".heading-side-lines").each(function(){new Waypoint({element:e(this),handler:function(){e(this.element).toggleClass("js-show")},offset:.66*e(window).height()})}),e(".heading-icon").length&&e(".heading-icon").each(function(){new Waypoint({element:e(this),handler:function(){e(this.element).toggleClass("js-show")},offset:.66*e(window).height()})}),e(".slick").slick()}),e(window).scroll(function(){if(void 0!=MyProject.header&&(e(document).scrollTop()>MyProject.headerOriginalHeight?MyProject.header.addClass("site-header--sticky"):MyProject.header.removeClass("site-header--sticky")),e(".hero-banner").length>0){var t=e(this).scrollTop()+1,o=e(".hero-banner").height()/2;t<"1500"&&(e(".hero-banner").css({"background-position-y":t/2-o+"px"}),e(".hero-banner__overlay").css({opacity:.5+t/1e3}))}})}(jQuery),interactiveHouse.prototype.setDims=function(){var e=$(window).width();this.dims={panel:300,artOffsetTop:$("#ih_art").offset().top-$(".site-header").first().outerHeight(),windowW:e,artH:1e3,artWDefault:1140},this.defaultViewBox="0 0 "+e+" 1000",$("svg","#ih_art")[0].setAttribute("width",e),$("svg","#ih_art")[0].setAttribute("viewBox",this.defaultViewBox),$(".svg-fluid","#ih_art").attr("width",e),$(".svg-fluid-pattern > g","#ih_art").each(function(){var t=$(this)[0].getBoundingClientRect().width/e;$(this).parent().attr("width",t)});var t=$("#house","#ih_art")[0].getBoundingClientRect(),o=(e-t.width)/2;$("#house","#ih_art")[0].setAttribute("transform","translate("+o+" 0)"),null!==this.showingRoom&&this.showRoom(this.showingRoom)},interactiveHouse.prototype.setControls=function(e){var t=this;if(null!=this.rooms[e.up]){var o=t.rooms[e.up];$("#ih_control-up").removeClass(t.classes.controlsDisabled).on("click",function(){t.showRoom(o)})}else $("#ih_control-up").addClass(t.classes.controlsDisabled).off("click");if(null!=this.rooms[e.down]){var i=t.rooms[e.down];$("#ih_control-down").removeClass(t.classes.controlsDisabled).on("click",function(){t.showRoom(i)})}else $("#ih_control-down").addClass(t.classes.controlsDisabled).off("click");if(null!=this.rooms[e.left]){var s=t.rooms[e.left];$("#ih_control-left").removeClass(t.classes.controlsDisabled).on("click",function(){t.showRoom(s)})}else $("#ih_control-left").addClass(t.classes.controlsDisabled).off("click");if(null!=this.rooms[e.right]){var a=t.rooms[e.right];$("#ih_control-right").removeClass(t.classes.controlsDisabled).on("click",function(){t.showRoom(a)})}else $("#ih_control-right").addClass(t.classes.controlsDisabled).off("click")},interactiveHouse.prototype.interactiveHouseAnimations=function(){function e(e,o){var i=e[0].getBoundingClientRect(),s=t.width-i.x,a=0-(t.width-s+i.width),n=(t.width-i.x)/t.width*o;(new TimelineMax).to(e,n,{x:s,repeat:-1,ease:Linear.easeNone}).set(e,{x:a}).to(e,o,{x:s,repeat:-1,ease:Linear.easeNone}).play()}var t=$("svg","#ih_art")[0].getBoundingClientRect(),o=$("g#windmill-props");(new TimelineMax).to(o,2,{rotation:360,transformOrigin:"56% 60%",repeat:-1,ease:Linear.easeNone},"+=1").play();var i=$("g#vaccum");(new TimelineMax).to(i,.1,{y:-2,ease:Linear.easeNone,repeat:-1,yoyo:!0}).play();var s=$("g#washer");(new TimelineMax).to(s,.05,{x:-2,repeat:-1,yoyo:!0}).play();var a=$("g#dryer");(new TimelineMax).to(a,.05,{y:-2,repeat:-1,yoyo:!0}).play();var n=$("#microwave-screen");(new TimelineMax).from(n,.5,{fill:"yellow",repeat:-1}).to(n,.5,{fill:"orange",repeat:-1,yoyo:!0}).play(),e($("g#cloud-1"),60),e($("g#cloud-2"),30),e($("g#cloud-3"),50);var r=$("#laptop-glow");(new TimelineMax).from(r,.25,{opacity:0,repeat:-1}).to(r,.125,{opacity:.75,repeat:-1}).to(r,.075,{opacity:0,repeat:-1}).to(r,.25,{opacity:.75,repeat:-1}).play();var l=$("#music-note-1");(new TimelineMax).to(l,1.75,{y:-25,opacity:0,transformOrigin:"50% 50%",repeat:-1}).play();var c=$("#music-note-2");(new TimelineMax).to(c,2.33,{y:-25,opacity:0,transformOrigin:"50% 50%",repeat:-1}).play();var d=$("#music-foot");(new TimelineMax).to(d,1.155,{rotation:-20,transformOrigin:"0% 100%",repeat:-1,yoyo:!0}).play()},interactiveHouse.prototype.successLoad=function(e){function t(){new Date-i<a?setTimeout(t,a):(s=!1,o.setDims())}var o=this;$("#ih_art").html($("svg",e).attr("aria-hidden","true")),this.art=$("svg","#ih_art")[0],this.setDims();var i,s=!1,a=500;$(window).resize(function(){i=new Date,!1===s&&(s=!0,setTimeout(t,a))}),this.interactiveHouseAnimations(),$("#ih_control-home").on("click",function(){o.showRoom(null)});var n;for(var r in this.rooms)n=this.rooms[r],this.rooms[r].title=$("title","#"+n.id).text(),this.rooms[r].info=$("desc","#"+n.id).html(),document.getElementById(n.id).onclick=function(e){return function(){return o.showRoom(e),!1}}(n)},interactiveHouse.prototype.loadFile=function(e){var t=this;$.ajax({xhr:function(){var e=new window.XMLHttpRequest;return e.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;console.log(t)}}),e},url:e,context:document.body,success:function(e){t.successLoad(e)}})},interactiveHouse.prototype.showRoom=function(e){var t=this;if(t.dims.artOffsetTop=$("#ih_art").offset().top-$(".site-header").first().outerHeight(),$("html, body").animate({scrollTop:t.dims.artOffsetTop},200),TweenMax.pauseAll(),null==e)this.showingRoom=null,TweenMax.to(this.art,1,{attr:{viewBox:this.defaultViewBox},ease:Power3.easeInOut,onComplete:TweenMax.resumeAll()}),$("#ih_panel").removeClass("show"),setTimeout(function(){$("#ih_info").empty()},700);else{this.showingRoom=e,this.setControls(e);var o=$("#"+e.id)[0].getBBox(),i=(t.dims.windowW-t.dims.artWDefault)/2,s=o.x+i,a=o.y,n={x:s-(t.dims.windowW/4-o.width)/2,y:a-(t.dims.artH/4-o.height)/2,w:t.dims.windowW/4,h:t.dims.artH/4},r=n.x+" "+n.y+" "+n.w+" "+n.h;TweenMax.to(this.art,1,{attr:{viewBox:r},ease:Power3.easeInOut,onComplete:function(){TweenMax.resumeAll()}}),$("#ih_info").html('<h2 class="interactive-house__title">'+e.title+"</h2>"+e.info).show(),$("#ih_panel").addClass("show")}};
//# sourceMappingURL=script.min.js.map